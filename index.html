<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SCADA Distribution GUI</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="styles.css" />
</head>
<script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>

  
<body>

<!-- Side Panel (now on the left) -->
<div id="sidePanel">
  <h2>Pole Details</h2>
  <div id="poleInfo">Click a pole to see details.</div>
  <h3>Event Timeline</h3>
  <div id="eventLog"></div>
  <button onclick="simulateFault()"> Simulate Fault</button>
  <button onclick="generateSampleData()"> Generate Sample Data</button>
  <button onclick="reset()"> Reset System</button>
  <button onclick="showAnalytics()" id="viewGraphBtn"> View Graph</button>
  <button onclick="turnOnSubstation()" id="substationToggleBtn" style="display: none;"> Turn On Substation</button>
</div>

<!-- Main Content Area -->
<div id="mainContent">
  <header>
    <button id="hamburger-btn">☰</button>
    <span>Grid Overview</span>
  </header>
  <div id="map"></div>
  
  <!-- Analytics Block -->
  <div id="analyticsBlock" class="analytics-block">
    <div class="analytics-header">
      <h3> Real-time Analytics</h3>
      <div class="analytics-controls">
        <select id="selectedPole" onchange="updateAnalytics()">
          <option value="all">All Poles</option>
        </select>
        <button onclick="clearAnalyticsData()" title="Clear Analytics Data">🗑️</button>
        <button onclick="toggleAnalytics()" id="toggleAnalytics" title="Minimize Analytics">📉</button>
      </div>
    </div>
    <div class="analytics-content">
      <div class="chart-container">
        <canvas id="voltageChart"></canvas>
      </div>
      <div class="chart-container">
        <canvas id="currentChart"></canvas>
      </div>
    </div>
    <div class="resize-handle"></div>
  </div>
</div>


<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script type="module" src="./js/app.js"></script>
<div id="alertBanner" class="alert-banner"></div>


</body>
</html>